import{a as c,S as v,i as d}from"./assets/vendor-04e6ccb5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();let i=null,s=1;const f=12;c.defaults.baseURL="https://api.unsplash.com";c.defaults.headers.common.Authorization="Client-ID LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc";function p(t,e=1,n){return c.get("/search/photos",{params:{query:t,orientation:"portrait",page:e,per_page:n}})}const S={lines:20,length:79,width:17,radius:54,scale:.45,corners:.6,speed:1.6,rotate:44,animation:"spinner-line-fade-quick",direction:1,color:"#89ff57",fadeColor:"transparent",top:"54%",left:"50%",shadow:"0 0 2px transparent",zIndex:2e9,className:"spinner",position:"absolute"},l=document.querySelector(".js-backdrop"),m=new v(S),q={root:null,rootMargin:"100px",threshold:1},_=function(t,e){t.forEach(n=>{n.isIntersecting&&(e.unobserve(n.target),E())})},w=new IntersectionObserver(_,q),I=document.querySelector(".js-search-form"),h=document.querySelector(".js-gallery");I.addEventListener("submit",M);async function M(t){t.preventDefault(),y(),i=t.currentTarget.elements["user-search-query"].value.trim(),s=1;try{const{data:{results:e,total_pages:n}}=await p(i,s,f);e.length===0&&d.error({message:"Sorry, there are no images matching your search query. Please try again!"}),console.log(e),h.innerHTML=g(e),L(n)}catch(e){console.log(e)}finally{b()}}async function E(){s+=1,y();try{const{data:{results:t,total_pages:e}}=await p(i,s,f);h.insertAdjacentHTML("beforeend",g(t)),L(e)}catch(t){console.log(t)}finally{b()}}function g(t){return t.map(e=>`<li class='gallery__item'>
    <img src='${e.urls.small}' alt='${e.alt_description}' class='gallery-img' />
  </li>`).join("")}function y(){m.spin(l),l.classList.remove("is-hidden")}function b(){m.stop(),l.classList.add("is-hidden")}function L(t){if(s<t){const e=document.querySelector(".gallery__item:last-child");w.observe(e)}else d.error({message:" We're sorry, but you've reached the end of search results."})}
//# sourceMappingURL=commonHelpers.js.map
